// Hàm tạo nội dung và in - SỬA LẠI THEO LOOPED LABS
        function createAndPrintContent(kitchenType) {
            // Lọc danh sách món theo loại bếp
            let filteredDishes = [];
            if (kitchenType === 'pho') {
                filteredDishes = allDishes.filter(dish => dish.kitchenClass === 'pho-item');
            } else if (kitchenType === 'rice') {
                filteredDishes = allDishes.filter(dish => dish.kitchenClass === 'rice-item');
            }
            
            // Kiểm tra xem có món để in không
            if (filteredDishes.length === 0) {
                hideLoading();
                alert(`Không có món nào cho BẾP ${kitchenType === 'pho' ? 'PHỞ' : 'CƠM'}`);
                return;
            }
            
            // Tạo nội dung HTML
            let printContent = createSimplePrintContent(kitchenType, filteredDishes);
            
            // Mã hóa Base64 theo chuẩn
            const base64Content = btoa(unescape(encodeURIComponent(printContent)));
            
            // Tạo URL print:// theo đúng format của Looped Labs
            // Format: print://escpos.org/escpos/net/print?srcTp=base64&srcObj=html&numCopies=1&src=[BASE64_CONTENT]
            const printUrl = `print://escpos.org/escpos/net/print?srcTp=base64&srcObj=html&numCopies=1&src=${base64Content}`;
            
            try {
                isPrinting = true;
                disablePrintButtons(true);
                
                // Thử mở URL trực tiếp
                window.location.href = printUrl;
                
                // Đợi 2 giây rồi ẩn loading
                setTimeout(() => {
                    hideLoading();
                    disablePrintButtons(false);
                    isPrinting = false;
                }, 2000);
                
            } catch (error) {
                console.error('Lỗi khi in:', error);
                hideLoading();
                disablePrintButtons(false);
                isPrinting = false;
                alert('Không thể in. Vui lòng kiểm tra lại ứng dụng Looped Labs.');
            }
        }
